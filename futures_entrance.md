# 中国期货市场用技术指标进场能给提高胜率吗？

*作者：奔跑的青椒*<br />
*出处：知识星球【涛哥聊 Python】*<br />
*原文链接：【数据漫游系列文章】[https://www.defcoding.com/data#/futures_entrance](https://www.defcoding.com/data#/futures_entrance)*

> 对交易市场进行分析时，常常使用两种工具，技术分析和基本面分析，技术分析有多种价格指标，使用看起来高大上的指标进行交易能提高盈利的胜率吗？

### 待验证假设
技术指标进场的胜率很难超过随机进场胜率 --《期货交易计算机分析指南》

### 分析方案
1. 选取国内期货市场中已存在至少 6年且成交量和持仓量较大的 17个品种中的 **10年（2010~2020年）主力合约数据**作为回测的数据源。
2. 使用抛硬币方式随机进场做多或者做空，统计持仓期分别为 5天、10天、20天的胜率作为基准。
3. 使用和步骤 2 相同的持仓期，分别测试 5-20天周期双均线、4-9-18天周期三均线、20天周期CCI、20天唐奇安通道突破、25天ROC和 20天周期布林带进场策略的胜率。
4. 通过对比随机进场和技术指标进场策略的胜率得出结论。

**疑问解答？**<br/>
问：为什么选择成交量和持仓量较大的品种作为回测数据源。<br/>
答：成交量和持仓量较大的品种流动性较高，在实际过程中容易促成交易的成功，能更好的反应真实世界的情况。

问：为什么选择 17 个品种和 10年数据回测。<br/>
答：避免幸存者偏差造成结论错误。

问：为什么选胜率比较。<br/>
答：交易系统不仅仅是进场，还有退场（止盈或止损），仓位管理等环节，由于退场标准一致，通过对比胜率就可以看出孰优孰劣。

### 分析工具
1. 数据源来自 [Tushare](https://tushare.pro/document/1) 和 [聚宽量化平台 JQData](https://www.joinquant.com/help/api/help?name=JQData)。
2. Python 和 Talib 实现技术指标进场策略。
3. Pandas 进行最终结果分析。

### 分析过程
1. 使用 JQData 获取流动性和持仓量最大的 17 个品种。

```python
'CF.ZCE', 'BU.SHF', 'C.DCE', 'L.DCE', 'I.DCE', 'RB.SHF', 'AG.SHF',
'Y.DCE', 'RM.ZCE', 'JD.DCE', 'P.DCE', 'M.DCE', 'TA.ZCE', 'AU.SHF',
'RU.SHF', 'SR.ZCE', 'FG.ZCE',

一号棉花，石油沥青，玉米，聚乙烯，铁矿石，螺纹钢，沪银，
豆油，菜粕，鸡蛋，棕榈油，豆粕，PTA，沪金，
橡胶，白糖，玻璃
```

2. 随机进场策略，使用抛硬币方式，正面做多，反面做空，分别统计持仓 5天、10天、20天、30天的胜率。<br/>
3. 5-20天双均线策略，5日均线自下往上穿过 20日均线时做多，5日均线自上往下穿过 20日均线时做空。
4. 4-9-18天三均线策略，4日和 9日均线都自下往上穿过 18日均线时做多，4日和 9日均线都自上往下穿过 18日均线时做空。
5. 20天周期 CCI（商品通道指数）策略，CCI 指标线由下往上穿过 0 点时做多，CCI 指标线由上往下穿过 0 点时做空。
6. 20天唐奇安通道突破策略，当天收盘价大于过去 20 天最高价时做多，当天收盘价小于过去 20 天最低价时做空。
7. 25天 ROC（变动率指标）策略，ROC 指标线由下往上穿过 0 点时做多，ROC 指标线由上往下穿过 0 点时做空。
8. 20天布林带策略，收盘价大于上轨线时做多，收盘价小于下轨时做空。

**疑问解答？**<br/>
问：策略如何避免偷价和使用未来函数？<br/>
答：策略的买入和卖出时间为：当符合进场策略信号时，以第二天开盘价作为买入价，当符合出场信号时，以第二天开盘价作为卖出价。

### 结果汇总
#### 随机进场策略统计结果汇总
**随机进场持仓 5 天胜率统计**<br/>
![随机 5 天](http://cdn.defcoding.com/DA1FECFA-9B1D-425C-9C11-DD96E5AFFA3B.png)

**随机进场持仓 10 天胜率统计**<br/>
![随机 10 天](http://cdn.defcoding.com/687FBD0A-407C-4ACE-9B29-76254EB29E8D.png)

**随机进场持仓 20 天胜率统计**<br/>
![随机 20天](http://cdn.defcoding.com/9F773EE3-AEDA-4FF2-AE8F-1D1B8657101A.png)

#### 所有策略统计结果汇总
**所有策略持仓 5 天结果汇总**<br/>
![汇总 5天](http://cdn.defcoding.com/00973CEC-A782-4157-AEDC-D9D9F981C4A2.png)

**所有策略持仓 10 天果汇总**<br/>
![汇总 10天](http://cdn.defcoding.com/934D8298-58BB-4DBA-8BAE-915CCDCDA97E.png)

**所有策略持仓 20 天结果汇总**<br/>
![汇总 20天](http://cdn.defcoding.com/C692349D-3818-44F8-A1D3-3F033CCA4FCB.png)

### 结论
1. 通过汇总结果对比胜率，所有策略的胜率都在 50% 左右，和抛硬币没有什么区别，未参数调优的技术指标进场并不能带来胜率的提升。
2. 市场交易是个竞争激烈的地方，投资者不应该执迷于高大上的技术指标研究，其他技术指标同样不能对胜率有很大的提升。

### 风险提示
1. 本文分析过程和结论尽可能科学和客观，如有不严谨的地方，还望多指教。
2. 本文不构成任何投资建议，教人炒股，天打雷劈。
